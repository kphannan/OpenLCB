<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>OpenLCB for Hobbyists</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.2  (Unix)">
	<META NAME="CREATED" CONTENT="0;0">
	<META NAME="CHANGEDBY" CONTENT="David Harris">
	<META NAME="CHANGED" CONTENT="20110120;20573500">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1><IMG SRC="../web/logo-ajs-dph.png" NAME="OpenLCB" ALIGN=RIGHT WIDTH=172 HEIGHT=71 BORDER=0>OpenLCB
for Hobbyists</H1>
<P>If you want to build your own OpenLCB nodes and play with them,
there are several ways to proceed.</P>
<P><SPAN STYLE="text-decoration: none">Generally, the <A HREF="http://arduino.cc/">Arduino
platform</A> is the easiest way to proceed. “Arduino” refers to a
family of open-source hardware based on the <A HREF="http://www.atmel.com/dyn/products/devices.asp?family_id=607">AVR</A>
processor. There's a basic <A HREF="http://arduino.cc/en/Guide/Environment">software
development tool kit</A> (IDE) that lets you easily and quickly
download your code into an Arduino board, and then debug it there.</SPAN></P>
<P><SPAN STYLE="text-decoration: none">After you download the IDE,
start it and open  'Arduino--&gt;Preferences'.  Change the sketch
directory to be</SPAN><SPAN STYLE="text-decoration: none"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>
'</FONT></FONT></SPAN><FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>OpenLCB/trunk/prototypes/C'
or wherever you have placed it.  Close the IDE and reopen it.  You
should now be able to see the libraries in 'Files--&gt;Sketchbook'
and the examples in 'Files--&gt;Examples'.  </FONT></FONT></SPAN></FONT>
</P>
<P><IMG SRC="http://siliconrailway.com/images/si2193_003.jpg" NAME="OpenLCB" ALIGN=RIGHT WIDTH=182 HEIGHT=182 BORDER=0><SPAN STYLE="text-decoration: none">You
can download software for a basic OpenLCB node from our <A HREF="http://sourceforge.net/scm/?type=svn&amp;group_id=286373">code
repository</A> and build it within the <A HREF="http://arduino.cc/en/Guide/Environment">Arduino
IDE</A>. You can basically run it on any <A HREF="http://www.arduino.cc/en/Main/Hardware">Arduino-compatible
board</A>, but to communicate with others you need to have Controller
Area Network (“CAN bus”) hardware attached. The usual chipset is
an <A HREF="http://www.microchip.com/wwwproducts/Devices.aspx?dDocName=en010405">MCP2551</A>
and <A HREF="http://www.microchip.com/wwwproducts/Devices.aspx?dDocName=en010406">MCP2515</A>
from <A HREF="http://microchip.com/">MicroChip.com</A>. <A HREF="http://siliconrailway.com/">LEDuino
boards</A> have this already present, or you can put together a CAN
controller on a prototype board from the <A HREF="http://siliconrailway.com/images/schematics/EP2193-1002-2.pdf">schematic</A>.
</SPAN>
</P>
<P><SPAN STYLE="text-decoration: none">Once you've got the basic
communications working, you can connect your OpenLCB board via
<A HREF="http://arduino.cc/en/Tutorial/HomePage">digital and analog
input and output leads</A>, <A HREF="http://principialabs.com/arduino-serial-servo-control/">servo</A>
or <A HREF="http://www.ladyada.net/make/mshield/index.html">motor
drivers</A>, <A HREF="http://arduino.cc/en/Main/ArduinoXbeeShield">XBee
radio links, </A><A HREF="http://www.ladyada.net/learn/lcd/charlcd.html">LCD
display drivers</A>, or lots of other methods. There's a large
community of Arduino hobbyists who are <A HREF="http://www.dave-auld.net/index.php?view=category&amp;id=53%3Aarduino-input-output-basics&amp;option=com_content&amp;Itemid=107">connecting
all sorts of devices</A>.</SPAN></P>
<P STYLE="text-decoration: none">The easiest way to connect OpenLCB
to hardware is through consuming and producing events. For example,
here's the code that takes events detected by the basic software and
uses them to drive a servo output to one of three positions: 
</P>
<PRE><CODE><SPAN STYLE="text-decoration: none">  // Invoked when an event is consumed.</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">  // &quot;index&quot; is the index of the consumed event, 0 to 2</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">  if (index == 0) {</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">    servo9.write(0);</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">  } else if (index == 1) {</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">    servo9.write(90);</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">  } else if (index == 2) {</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">    servo9.write(180);</SPAN></CODE>
<CODE><SPAN STYLE="text-decoration: none">  }</SPAN></CODE></PRE><P>
<SPAN STYLE="text-decoration: none"><BR>This, along with some glue
code, is compiled with the basic OpenLCB libraries in the Arduino
IDE, and then downloaded into your board. See the <A HREF="C/OlcbServoNode">OlcbServoNode</A>
sketch for the complete example. </SPAN>
</P>
<HR>
<P>Site hosted by <FONT COLOR="#000080">
<A HREF="http://sourceforge.net/projects/openlcb"><FONT COLOR="#000080"><IMG SRC="http://sflogo.sourceforge.net/sflogo.php?group_id=286373&amp;type=13" NAME="graphics1" ALIGN=ABSMIDDLE WIDTH=120 HEIGHT=30 BORDER=2></FONT></A></FONT>
</P>
<P>This is SVN $Revision$ 
</P>
</BODY>
</HTML>