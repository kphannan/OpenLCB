<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>OpenLCB To Do: Remaining Questions</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.2  (Unix)">
	<META NAME="CREATED" CONTENT="0;0">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGED" CONTENT="20100529;10062100">
	<META NAME="Info 1" CONTENT="">
	<META NAME="Info 2" CONTENT="">
	<META NAME="Info 3" CONTENT="">
	<META NAME="Info 4" CONTENT="">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<!-- $Id$ -->
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1>To Do: Remaining Questions</H1>
<P>This page is a place to record issues that are still to be
resolved. This is <U>not</U> a place for recording the discussion or
decisions; once a decision is made, it should be implemented in the
documents it affects. In particular, please don't make this a list of
<U>answered</U> questions, those live in the docs we're writing. The
numbering is historical-order; please delete an item that's done, not
renumber below it, so SVN can track progress. If you want to tag
something as high-priority, please use color. Currently, “<SPAN STYLE="background: #99ccff">blue
8</SPAN>” is high-priority documentation tasks, and “<SPAN STYLE="background: #00ff00">light
green</SPAN>” is high-priority implementation tasks. (Feel free to
modify those color chooses, they were picked by a color-challenged
person)</P>
<P STYLE="margin-bottom: 0cm">3. Settle question of terminology:
&quot;Wire Protocol&quot; vs &quot;Transport Mechanism&quot;,
&quot;Transport Layer Implementation&quot;, etc. E.g. do we stress
protocol and wiring, or the transport/application layering? (See also
item 14 below). If this terminology needs to be standardized and
consistent, get it done, otherwise remove from ToDo list.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><SPAN STYLE="background: #99ccff">4.
Where do we document how the proposal meets the use cases?</SPAN>
(<I>This is a question about documentation; what document is the
right place? I suggest in a 2</I><SUP><I>nd</I></SUP> <I>part to the
Use Case doc, so you can read the use cases by themselves, and then
read the follow up discussion later on – Bob J</I>)</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">8. Configuration process needs detail,
both at line level (how to move data) and at the higher level. See
<A HREF="notes/Configuration.html">separate note.</A></P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">12. <SPAN STYLE="font-style: normal">Make
a notional start on “train control”, e.g. throttles, etc;</SPAN>
define initial protocol. See <A HREF="notes/LocomotiveControl.html">separate
document.</A> <SPAN STYLE="font-style: normal">DCC, of course, but
also allowing for other/future systems. Note that this is separate
from e.g. connections to LocoNet, XpressNet, etc</SPAN></P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">13. Alex raised the issue of a &quot;layout
ID&quot; so e.g. portable devices (WiFi throttles) can identify which
of several layouts (e.g. at a show) should be joined. See <A HREF="notes/LayoutID.html">working
note</A>. <I>(Does this indicate need for another OpenLCB spec, for
WiFi connection and access? BobJ)</I></P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">14. MTI (Message Type Indicator)
doesn't clarify the difference between &quot;OpenLCB transport level&quot;
and &quot;OpenLCB application level&quot;. Is the MTI (which needs to
be renamed in any case) really a transport-specific field?</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">17. Still need to think about
&quot;interface Event&quot; conventions for e.g. large modular
layouts. Via XML naming? Via EventID conventions? Goal is to link
next-neighbor modules easily. <BR>Node and Event spaces for modular
clubs? Let them allocate it! This might be a place for a router
(which changes ID numbers) Write some examples. <BR><I>DPH: NIDa and
Eventa can be allocated locally and be made globally unique by an
appropriate prefix. I had thought use of masks might allow a flexible
mechanism, that is well understood, to let different subnets
(segments) have varying numbers of nodes and events. </I>
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P>18. We plan to define a (small number) of “globally known”
events that people can use if they want to. E.g. “power down” or
“emergency stop” (See lighting item 24 below) (item done)(item
done) Document this, make it a separate note, and mention in
overviews. Document allocation mechanism (reservation mechanism) for
global, manufacturer-specific conventions. How to get those in e.g.
Blue/Gold configuration? See item 45.</P>
<P STYLE="margin-bottom: 0cm">20. Write an XML-based representation,
e.g. as a separate wire protocol for web services.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P>21. Consider more detection and location things</P>
<UL>
	<UL>
		<LI><P>(item done)</P>
		<LI><P>(item done)</P>
		<LI><P>Smart Block Occupancy (Digitrax Transponding)</P>
	</UL>
</UL>
<P STYLE="margin-left: 2cm"><I>(DPH - I suspect there is a good
unifying model that would pull this all together with the throttle
stuff, but I do not know what it is. Perhaps defining (x,y,z) for
every node, including Locos. Somehow dumb-BODs, smart-BODs, RF
triangulation would all map to (x,y,z).)</I></P>
<P>22. Signaling (Signalling) – see <A HREF="notes/Signaling.html">initial
Signaling design note</A>. Needs work!</P>
<P>23. Layout Sound Control 
</P>
<OL START=13>
	<P>Alex: (maybe just an adaptation to P/C Events but maybe should be
	identified at least) DPH: I think this is quite straight-forward. It
	includes complex nodes that can send and receive streams, or store
	the sounds, whether in real-time or not. The control of these should
	be straight-forward with events. Things like volume could use Events
	with data to set absolute levels, or increment and decrement Events.
	<I>(Need example doc for this application! - BobJ)</I></P>
</OL>
<P>24. Layout and Room Lighting Control DPH: Bob can probably fill us
in on this one ;-) as he has some experience with X10 and JMRI. Do we
need to do more than suggest some approaches? Maybe an application
note, showing how it could be done? <I>(Define some recommended
events for room intensity, e.g. how to code intensity in event space
- BobJ)</I></P>
<P>25. Fast Clock DPH: Again, we only need to suggest some
approaches. Bob had suggested EID=
&quot;&lt;ManuID/Model&gt;&lt;time-of-day-in-minutes:24&gt;&quot; The
fast-clock generates one message per fast-minute. Nodes that do
simple things just respond to the time-Event of interest, eg
&quot;&lt;Alex/FastClock&gt;&lt;1PM&gt;&quot;. Other nodes might
consume all of them to display a fast-clock, or a station-clock.
Configuration would be manufacturer dependant. Need to include rate
indication, so devices can extrapolate between events? Simpler in
remote nodes than figuring it out from spacing. Also, need to know
running vs stopped? (Just slightly more than 2^16 seconds in a day,
just less than 2^12 minutes. Are fast seconds needed, e.g. to
synchronize automation? Lots of traffic) <I>(This should go in a note
where we can really develop it – Bob J)</I></P>
<P>26. Streaming Media, specifically semi-real time delivery of
content (not on CAN; see also 23)</P>
<OL START=13>
	<P>Alex: Maybe this too is an adaptation of P/C Events for the
	control side with then triggers nodes to perform standard media
	streaming using other industry standard UDP/TCP/IP protocols etc)
	DPH: Yes. I think we need Streams on CAN -- one would want to be
	able to download a set of sounds to a sound-node, and then trigger
	them via Events. These streams would run in the background. You are
	talking about real-time streaming. I had sent another email about
	having different kinds of streams. So, I think we need to define
	those. 
	</P>
	<P>Decision is <U>not</U> to include real-time streaming on CAN, due
	to difficulty of quality-of-service guarantees, but to attempt to
	include it on higher-bandwidth protocols, e.g. Ethernet, as needed.
	Not clear it is needed, though, as hardware with access to Ethernet
	has a lot of choices for e.g. streaming sound, video, etc.</P>
	<P>In any case, document decisions, and (if needed) add a note.</P>
</OL>
<P><SPAN STYLE="background: #00ff00">35. Go through CAN bit
assignments to make sure we have reserved 1 and 0 bits before and
after MTI so that we have full flexibility later on. Add note about
which reserved bits must not be checked (future use) and which are
for future priority use, hence should not be checked.</SPAN></P>
<P><SPAN STYLE="background: #99ccff">37. Add a user-level
introduction that talks about the user experience, and advantages to
users. This is not quite the same thing as use cases, but those could
be a starting point.</SPAN></P>
<P><SPAN STYLE="background: #99ccff">38. Turn the current
introduction into a real geek-level document with a consistent
organization.</SPAN></P>
<P><SPAN STYLE="background: #00ff00">43. The Consumer Identified and
Producer Identified messages in CAN format carry flags that don't fit
into the 8-byte data payload (as EventID is now the full 8 bytes), so
have to go in header. This is mixing transport/data/application
layer, and we need to put some real effort into getting it right. </SPAN>
</P>
<P STYLE="margin-bottom: 0cm"><SPAN STYLE="font-style: normal">45. Do
we want to define some node-specific global events? E.g. “Node has
logged error”, “Node has logged warning”; that in turn can e.g.
trigger log retrieval. Others? Can define standard events as NodeID
with low of 0xFFFF, etc. <A HREF="notes/Logging.html">This has
started in the Logging note.</A> Are there other areas that should be
considered? See item 18.</SPAN></P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">47. Eventually,
write some words about a recommended common log format (mechanism is
being developed in Logging note, but not format of log records)</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">49. Re button
configuration, Bob wrote in email:</P>
<BLOCKQUOTE>When I consider a consumer or producer, I've been
thinking of them as only knowing about <U>one</U> event. Instead of
&quot;a consumer can listen for 2 events and then do X in response&quot;,
I was thinking in terms of &quot;there are N consumers that listen
for their event and do X&quot;. In that case, you don't have to worry
about erasing/deleting/reprogramming a specific event in a producer
or consumer; you deal with <U>the</U> event in the producer or
consumer. Reading back through the docs, I see that we've talked
about both approaches. For example, the <A HREF="notes/ProducerConsumerModel.html">producer
consumer note</A> uses the &quot;one event per&quot; model. The
little boxes at the ends of the event arrows are individual producers
and consumers. Other places, e.g. the <A HREF="examples/BlueGoldConfig.html">original
Blue/Gold example</A> don't really make the distinction clearly. On
the other hand, the XML DTD I proposed to the NMRAnet group a while
back allowed you to put N events inside a &quot;producer&quot; or
&quot;consumer&quot; element.</BLOCKQUOTE>
<P STYLE="margin-left: 2cm; margin-bottom: 0cm">Action item here is
to make a decision as to status of “one event per PorC, allow N
PorCs” and/or “N events per PorC, only 1 PorC” models, and
document as needed. Is this a basic architectural choice, e.g. part
of a standard? Or just a conceptual convenience? Effects things like
configuration, logging, etc, but not really the basic protocol;
“Producer” and “Consumer” are not addressable objects in the
current protocol.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<BLOCKQUOTE STYLE="margin-left: 0cm; margin-right: 0cm"><SPAN STYLE="background: #00ff00">50.
Redo priority order of CAN CIM/RIM messages (see alanheathrobinson
email of 2009-08-11) so that the CIM sequence is in increasing
priority order (give priority to completing some allocations); should
we make RIM higher priority than CIM to get them done and announced?
In general, revisit all <SPAN STYLE="font-style: normal">CAN bit
position and polarity assignments to ensure that priority is properly
implied</SPAN></SPAN></BLOCKQUOTE>
<BLOCKQUOTE STYLE="margin-left: 0cm; margin-right: 0cm; font-style: normal">
<SPAN STYLE="background: #00ff00">51. If a CAN node receives a RIM
with its alias during normal operation, in addition to going offline
it should emit a “help me” frame that can be caught and logged.
(Probably shouldn't resend in case of error, as collisions can happen
in this case)</SPAN></BLOCKQUOTE>
<P STYLE="margin-bottom: 0cm; font-style: normal">52. NodeId vs
UniqueID terminology, esp. in the EventID allocation. Notional
approach:</P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm; font-style: normal">Define a space
	of 48-bit unique IDs. Operationally, this means changing the
	&quot;allocating nodeIDs&quot; document to refer to uniqueIDs, not
	nodeIDs, as the unit of allocation. Require that every OpenLCB node
	be given a unique 48-bit nodeID taken from an assigned set of
	uniqueIDs. 
	</P>
	<LI><P STYLE="margin-bottom: 0cm; font-style: normal">Require that
	every OpenLCB producer node be given a block of 64-bit event IDs
	such that the values in the most significant 48 bits of all those
	event IDs lie within an assigned set of 48-bit unique IDs, and none
	of those event IDs is assigned to more than one node.</P>
	<LI><P STYLE="margin-bottom: 0cm; font-style: normal">Recommend, but
	don't require, that nodes start assigning EventIDs using the
	uniqueID they're using as their NodeID (most people don't need to
	look at EventID numbers, but being able to guess where they came
	from can be a useful debugging hint)</P>
</UL>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">54. Need a
boot-loader/IPL process definition. Also serves as a good streaming,
datagram example.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">55. (from the
can/index.html To Do list) Need to do a lot of work on cabling,
connectors, etc at the CAN physical layer. Can we reasonably <U>require</U>
a cable implementation? Recommend one? Document one solution? 
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">56. (from the
can/index.html To Do list) Decide on CAN device termination
requirements, as needed. <I>(Some things, like a built in terminator,
should be “desirable but not required”; there's more than one way
to do it: switch on board; ship a resistor in one of the CAN
connectors on the board; etc. - BobJ)</I> Even if the decision is not
to have a requirement, document that.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">57. (from the
can/index.html To Do list) Decide on CAN power/ground supply &amp;
isolation requirements, as needed. <I>(Issue of power in a required
implementation will be a contentious one. - BobJ)</I> Even if the
decision is not to have a requirement, document that.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">59. Datagram
example: Small displays around the layout. Datagram payload is
smaller than e.g. 4lines x 80characters, how to address that?
Addressable content? Longer Datagram?</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal">60. Datagram
support requires dedicated buffer (well, sort of requires it) for
receipt in CAN nodes. That's a real limitation in RAM starved PIC
nodes, or even basic Arduino nodes. Is 64 bytes reasonable? 32? 80?
(16+64) 88? (for 80 char line of text)</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm; font-style: normal"><SPAN STYLE="background: #00ff00">61.
Need to redo MTI allocation. Aspects (which need to be documented!)
are:</SPAN></P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm; font-style: normal"><SPAN STYLE="background: #00ff00">Code
	with a fixed bit to indicate only 8 (?) bits are significant, so
	that it sets into CAN OK</SPAN></P>
	<LI><P STYLE="margin-bottom: 0cm; font-style: normal"><SPAN STYLE="background: #00ff00">Make
	it easy to separate addressed vs unaddressed, again for CAN</SPAN></P>
	<LI><P STYLE="margin-bottom: 0cm; font-style: normal"><SPAN STYLE="background: #00ff00">Make
	it easy to separate out the stream payload (or other
	sort-of-addressed messages)</SPAN></P>
	<LI><P STYLE="margin-bottom: 0cm; font-style: normal"><SPAN STYLE="background: #00ff00">Make
	it easy to separate out “must attend” messages for filtering</SPAN></P>
</UL>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">64. Perhaps add a simple mark/reply
out-of-band signal to Streams. Allow marking a byte as “this byte
is marked” (or perhaps “last byte moved/provided is marked”).
Allow sending a no-data reply back the other way. Useful to prevent
people from trying to use buffer size as a stand-in for e.g. record
length (can't count on that size being anything in particular anyway)
Use case is for use in bootloader.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><SPAN STYLE="background: #99ccff">66.
Redo introductory docs, esp. TN-9-6-NMRANET-Overview-Draft.pdf</SPAN></P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm"><SPAN STYLE="background: #00ff00">67.
Create sample C implementations, along with a C build, test and
distribution infrastructure (This might be OBE given Mike J's work)</SPAN></P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P>70. Native format for strings is ASCII, UTF-8 or UTF-16? <FONT FACE="Times New Roman, serif"><FONT SIZE=3>Just
one, or some way of identifying e.g. </FONT></FONT><A HREF="http://en.wikipedia.org/wiki/Byte_Order_Mark"><FONT COLOR="#0842b5"><FONT FACE="Times New Roman, serif"><FONT SIZE=3><U>Byte
Order Mark</U></FONT></FONT></FONT></A> <FONT FACE="Times New Roman, serif"><FONT SIZE=3>(BOM)?
</FONT></FONT>
</P>
<P STYLE="margin-bottom: 0cm">71.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">72.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<P STYLE="margin-bottom: 0cm">73.</P>
<P STYLE="margin-bottom: 0cm"><BR>
</P>
<HR>
<P>This is SVN $Revision$ 
</P>
</BODY>
</HTML>