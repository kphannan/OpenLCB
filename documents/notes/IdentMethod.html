<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Note: Ident Method(s)</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.2  (Unix)">
	<META NAME="CREATED" CONTENT="0;0">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGED" CONTENT="20100706;21110200">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
	<META NAME="CHANGEDBY" CONTENT="Bob Jacobsen">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1>Ident Method(s)</H1>
<P>Users may want to be able to identify a specific board (node) to a
configuration tool. We refer to this as an “ident” operation,
similar to the way that a pilot presses the “ident” button on a
plane's transponder to light up the proper echo on a traffic
controller's screen.</P>
<P>This note is a working draft proposal.</P>
<H2>Use Cases</H2>
<P>A user wants to use a configuration tool to configure a new input
on node A, located under the far end of the layout. He presses button
on the node, and the tool learns which node (specifically, the Node
ID). The tool then lights an indicator on the board to confirm that
it's found the right one.</P>
<P>A user walks from module to module on a modular layout, pressing
buttons. A configuration tool sees the sequence of button presses and
checks it against the expected module-to-module connections.</P>
<H2>Discussion</H2>
<P>There are (at least) four ways of doing this, each with advantages
and disadvantages.</P>
<H3>Dedicated Node-Specific Event</H3>
<P>One way to provide an “ident” capability would be to define a
node-specific EventID that nodes produce to identify themselves. For
example, reserving 0xFF,FF in the lower bytes, with the NodeID in the
upper bytes, would give a unique indication that an ident button was
pressed.</P>
<H4>Advantages</H4>
<P>The identification messages need to propagate across the entire
LCB. P/C Events are the OpenLCB general mechanism for doing this. 
</P>
<H4>Disadvantages</H4>
<P>Makes the event address space a lot less orthogonal.</P>
<P>Don't want every node to emit “produces” and “consumes”
messages for general event IDs, so would have to build that into
routing as a special case (this is an issue just beyond this use of
generic EventID signaling)</P>
<H3>Dedicated Global Event</H3>
<P>We could define a global eventID that indicates “ident”; the
source ID in the message then provides the information needed to
track down the source.</P>
<H4>Advantages</H4>
<P>Small footprint, stays orthogonal.</P>
<H4>Disadvantages</H4>
<P>Requires the global eventID space be implemented, specifically in
routers and gateways.</P>
<P>Requires central allocation of the EventID, but this only needs to
be done once.</P>
<H3>Configuration Message</H3>
<P>A specific form of configuration message within the <A HREF="ConfigurationProtocol.html">configuration
protocol</A> can be reserved for this.</P>
<P>The configuration protocol already has a “confirm” mechanism
to signal the proper board by e.g. lighting a light. Being able to
send a message back via button push, so that the configuration tool
can get positive confirmation of the right board, would be useful.</P>
<H4>Advantages</H4>
<P>The configuration protocol already has a “confirm” mechanism
to signal the proper board by e.g. lighting a light. Being able to
send a message back via button push, so that the configuration tool
can get positive confirmation of the right board, would be useful.</P>
<P>This is the only one of the four that might be able to handle
multiple idents at the some time, e.g. during modular layout setup,
by using the original configuration message to specify a particular
return message.  But it's not at all clear how to do overlapping
idents in the same node.</P>
<H4>Disadvantages</H4>
<P>Since the configuration protocol is point-to-point, the node with
the button press needs to find out where to send the message. It's
not at all clear how to solve this. It's not practical to first
communicate with all nodes so they know you want to hear when their
button is pressed.</P>
<H3>Dedicated Message Type</H3>
<P>A specific OpenLCB message type could be defined for this, with a
specific MTI. This could then be specified to propogate as needed.</P>
<H4>Advantages</H4>
<P>Can specify it exactly, without compromise.</P>
<H4>Disadvantages</H4>
<P>MTIs are eventually a scarce resource.</P>
<P>Another special case in code. This is not an incredibly large
issue, as simple nodes need only emit a fixed message, and routing
nodes just pass it through.</P>
<H2>Protocol</H2>
<P>We standardize on emitting the global event 0x 01 00 00 00 FF 00
to indicate an “ident”.</P>
<P>For nodes with blue and gold buttons, we recommend that pushing
both of them at the same time send an ident. (The Blue/Gold
configuration method is already using a single press of each button;
that might be revisited because pressing both for an ident leaves the
node partially in configuration mode. Perhaps always send an event
with gold is pressed? You can then press it twice to get back to
normal)</P>
<HR>
<P>This is SVN $Revision$ 
</P>
</BODY>
</HTML>