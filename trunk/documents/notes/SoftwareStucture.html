<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>NMRAnet Note: On Software Structure</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="824.48">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times}
    p.p2 {margin: 0.0px 0.0px 12.0px 0.0px; font: 12.0px Times}
    p.p3 {margin: 0.0px 0.0px 6.0px 0.0px; font: 12.0px Times; min-height: 14.0px}
  </style>
</head>
<body>
<h1 style="margin: 0.0px 0.0px 16.0px 0.0px; font: 24.0px Times"><b>On Software Structure</b></h1>
<p class="p2">Much of OpenLCB is based on broadcast messaging: A request for information is sent, received by all nodes, and perhaps some of them will reply. The protocol provides no concrete way to know when the last answer has been received.</p>
<p class="p2">Software that works with this system should keep track of everything that it hears, maintaining an internal model of the state of the parts of the OpenLCB that it's interested in. As messages come in, that model is then updated so that it's always as up-to-date as possible. The OpenLCB protocols help this by broadcasting status information as nodes become active, are reconfigured, etc. When a node or program joins the network, it can send requests for the information it needs to track. It then receives the direct responses to build an initial model, plus additional messages later on to keep the model up to date.</p>
<p class="p2">A model-based approach works much better than an “inquire when you need to know” approach. If the program waits until the last possible moment to request information that it needs, it'll still have to wait for the replies, and it won't reliably know when the last reply arrives. It will still need to build a model based on the replies, but now it will be much harder to ensure that model is complete. Sending lots of un-needed broadcast requests, along with the associated replies, can result in significant load on the network and nodes.</p>
<p class="p3"><br></p>
<p class="p2"><i>This is SVN $Revision: 52 $</i></p>
</body>
</html>
